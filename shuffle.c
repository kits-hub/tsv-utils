#include "utils.h"#include "fastrand.h"#include "kvec.h"void shuffle (const char **arr, int size);int shuffle_main(int argc, char *argv[]){    int c;    uint32_t seed = 11;    while ((c = getopt(argc, argv, "s:")) >= 0)        if (c == 's') seed = atol(optarg);    if (optind + 1 > argc) {        fprintf(stderr, "\n");        fprintf(stderr, "Usage: tsv-utils shuffle [-s seed=11] <list>\n\n");        fprintf(stderr, "Options: -s INT  RNG seed [11]\n\n");        return 1;    }    pcg32_init_state(seed);    kvec_t( const char* ) vs;    kv_init(vs);    kstream_t  *ks;    kstring_t  kt  = {0, 0, 0};    gzFile  fp;     fp = strcmp(argv[ optind ], "-")? gzopen(argv[optind], "r") : gzdopen(fileno(stdin), "r");     int i;    if( fp ){        ks = ks_init(fp);        i = 0;        while( ks_getuntil( ks, '\n', &kt, 0) >=  0){            if( kt.l == 0 ) continue;            kv_push( const char *, vs, strdup(kt.s));        }        ks_destroy(ks);        gzclose(fp);        }else{        fprintf(stderr, "[ERR]: can't open file %s\n", argv[ optind ]);        exit(1);    }        if(kv_size(vs) == 0) return 0;    shuffle(vs.a, kv_size(vs));    for (i = 0; i < kv_size(vs); ++i){        puts(kv_A(vs, i));        free((char*)kv_A(vs, i));    }         free(kt.s);    kv_destroy(vs);    return 0;}void shuffle (const char **arr, int size) {  int i;  for (i = size; i > 1; i--) {    int r            = pcg32_random_bounded_divisionless(i);    const char* val  = arr[i - 1];    arr[i - 1]       = arr[r];    arr[r]           = val;  }}